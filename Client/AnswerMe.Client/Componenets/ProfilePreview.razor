@using AnswerMe.Client.Core.Extensions
@using Models.Shared.Responses.Shared
@using Models.Shared.Responses.User


<div onclick="ProfilePreview.showModal()" class="btn btn-ghost pr-3 pl-3" style="display: flex;align-items: center">
    <UserAvatar ImageUrl="@null" Class="w-12" Letter="A"/>
    <div style="margin-left: 5px">SomeName</div>
</div>

<dialog id="ProfilePreview" class="modal">
    <div class="modal-box ">
        <div class="modal-action" style="margin: 10px">
            <form method="dialog">
                <!-- if there is a button, it will close the modal -->
                <button class="btn btn-circle">
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" id="Close">
                        <path d="M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z M15.7,14.3c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0
                            	L12,13.4l-2.3,2.3c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4l2.3-2.3L8.3,9.7c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l2.3,2.3
                            	l2.3-2.3c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4L13.4,12L15.7,14.3z" fill="#717af7" class="color000000 svgShape"></path>
                    </svg>
                </button>
            </form>
        </div>

        <div class="h-full px-3 pb-4 overflow-y-auto ">
            <div class="card shrink-0 w-full max-w-sm shadow-2xl bg-base-100" style="display:contents">
                <form class="card-body" style="display:grid;justify-content: center">

                    <div class="form-control  flex items-center">

                        <div class="stat">
                            <div class="stat-figure text-secondary">
                                <div class="avatar">
                                    <div class="w-20 rounded-full">
                                        <UserAvatar Class="w-20" ImageUrl="@User.ProfileImage" Letter="@User.Name?.FirstLetter()"/>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-value mt-1">@User.Name</div>
                        </div>


                    </div>

                    @if (StartMessaging)
                    {
                        <form method="dialog" class="form-control mt-6">
                            <button class="btn btn-outline btn-primary">Start Messaging</button>
                        </form>
                    }

                </form>
            </div>
        </div>


    </div>
</dialog>

@code {
    [Parameter] public required PreviewUserResponse User { get; set; }
    [Parameter] public bool StartMessaging { get; set; } 
}